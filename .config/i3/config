# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# _____________________________________________________________________________
# INFO
# ----

# Based on: https://www.youtube.com/watch?v=8-S0cWnLBKg

# Python scripting: https://github.com/altdesktop/i3ipc-python

# --no-startup-id used if not a windowed app (background process)

# Get keycode/key name
# `xev` and press codes
# or `xmodmap -pk`
#   9        0xff1b (Escape)     0x0000 (NoSymbol)    0xff1b (Escape)
#   66       0xffe5 (Caps_Lock)  0x0000 (NoSymbol)    0xffe5 (Caps_Lock)
#   133      0xffeb (Super_L)    0x0000 (NoSymbol)    0xffeb (Super_L)
#   134      0xffec (Super_R)    0x0000 (NoSymbol)    0xffec (Super_R)


# HOW TO GET CLASS NAME OF APP
# 1. Open the app whose class name you wish to find
# 2. Open the terminal and run `xprop`
# 3. Cursor changes to a cross hair, click on the desired window
# 4. Copy the second parameter of `WM_CLASS(STRING)`
#   - E.g. From `WM_CLASS(STRING) = "google-chrome", "Google-chrome"`
#   - copy ``Google-chrome`
# 5. Assign a certain app (class) to a certain workspace
#   - Every window in i3 has a class
#   - assign [class="Google-chrome"] $ws1
#   - Can define multiple properties/with regex
#     - assign [class="^jetbrains-.+"][window_type=dialog]

# WORK
# _NET_WM_BYPASS_COMPOSITOR(CARDINAL) = 2
# WM_WINDOW_ROLE(STRING) = "browser"
# WM_CLASS(STRING) = "google-chrome", "Google-chrome"
# _NET_WM_WINDOW_TYPE(ATOM) = _NET_WM_WINDOW_TYPE_NORMAL
# _NET_WM_PID(CARDINAL) = 36429
# WM_CLIENT_MACHINE(STRING) = "michael"
# WM_PROTOCOLS(ATOM): protocols  WM_DELETE_WINDOW, _NET_WM_PING, _NET_WM_SYNC_REQUEST


# Setup cal one day maybe:
# https://github.com/jcornuz/xfce4-genmon-gcalcli
# which uses:
# https://github.com/insanum/gcalcli

# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# If press the same switch to workspace hotkey again, return to where you came from instead
workspace_auto_back_and_forth yes
show_marks yes

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# NOTE: To apply system wide run: lxappearance and set to Noto Regular 12
# This will adjust it in all the GTKs
font pango:Noto 12

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status

# Default uses %, find dB better
# % maps to volume %, dB is logarithmic
# set $pulse-audio-up pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
# set $pulse-audio-down pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
set $pulse-audio-up pactl set-sink-volume @DEFAULT_SINK@ +5dB && $refresh_i3status
set $pulse-audio-down pactl set-sink-volume @DEFAULT_SINK@ -5dB && $refresh_i3status
set $pulse-audio-mute-toggle pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
set $pulse-audio-mute-on pactl set-sink-mute @DEFAULT_SINK@ 1 && $refresh_i3status
set $pulse-audio-mute-off pactl set-sink-mute @DEFAULT_SINK@ 0 && $refresh_i3status

bindsym XF86AudioRaiseVolume exec --no-startup-id $pulse-audio-up
bindsym XF86AudioLowerVolume exec --no-startup-id $pulse-audio-down
bindsym XF86AudioMute exec --no-startup-id $pulse-audio-mute-toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# _____________________________________________________________________________
# TERMINAL
# -----
# start a terminal
bindsym $mod+Return exec i3-sensible-terminal


# _____________________________________________________________________________
# DMENU
# -----
# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run
# -l # = # of vertical lines
# -b = bottom of screen  # not using to remind posture look up!
# -i = case insensitive
# -nb = normal background color
# -nf = normal foreground color
# -sb = selected background color
# -sf = selected foreground color
# -fn = font
# Sometimes it stops working until the cache cleared, perform it at startup
exec ~/.cache/dmenu_run
# All cmds version green
# mnemonic o = open
bindsym $mod+o exec dmenu_run -l 10 -i -nb '#004000' -nf '#ffffff' -sb '#00c000' -sf '#000000' -fn 'Noto-20'

# i3-dmenu-desktop only shows apps, things like poweroff or lxappearance
# Desktop version yellow
bindsym $mod+Shift+o exec i3-dmenu-desktop --dmenu="dmenu -l 10 -i -nb #404000 -nf #ffffff -sb #c0c000 -sf #000000 -fn Noto-20"

# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# _____________________________________________________________________________
# HJKL Keys & RESIZE
# ------------------

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Mod1 = ALT
bindsym $mod+Mod1+h resize shrink width 10 px or 5 ppt
bindsym $mod+Mod1+j resize grow height 10 px or 5 ppt
bindsym $mod+Mod1+k resize shrink height 10 px or 5 ppt
bindsym $mod+Mod1+l resize grow width 10 px or 5 ppt

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Unmapped so far
# bindsym $mod+Control+h
# bindsym $mod+Control+j
# bindsym $mod+Control+k
# bindsym $mod+Control+l


# Disabled resize mode, use hotkeys directly in normal mode with ALT+Mod
# mode "resize" {
#         # These bindings trigger as soon as you enter the resize mode
#
#         # Pressing left will shrink the window’s width.
#         # Pressing right will grow the window’s width.
#         # Pressing up will shrink the window’s height.
#         # Pressing down will grow the window’s height.
#         bindsym h resize shrink width 10 px or 10 ppt
#         bindsym j resize grow height 10 px or 10 ppt
#         bindsym k resize shrink height 10 px or 10 ppt
#         bindsym l resize grow width 10 px or 10 ppt
#
#         # same bindings, but for the arrow keys
#         bindsym Left resize shrink width 10 px or 10 ppt
#         bindsym Down resize grow height 10 px or 10 ppt
#         bindsym Up resize shrink height 10 px or 10 ppt
#         bindsym Right resize grow width 10 px or 10 ppt
#
#         # back to normal: Enter or Escape or $mod+r
#         bindsym Return mode "default"
#         bindsym Escape mode "default"
#         # bindsym $mod+r mode "default"
# }
# bindsym $mod+r mode "resize"



# _____________________________________________________________________________
# WINDOWS
# -------

# Use Mouse+$mod to drag floating windows to their wanted position
# I.e. you can press $mod, and click anywhere in the window to move it
floating_modifier $mod

# CLOSING
# -------

# Kill focused window
bindsym $mod+Shift+q kill
# Kill or other windows except currently focussed window
bindsym $mod+Mod1+q exec ~/.config/i3/scripts/keep-focused-window.py
# Kill all windows in workspace and move to next workspace
bindsym $mod+Shift+Mod1+q exec ~/.config/i3/scripts/close-all-windows.py

mode "window" {
    # SPLITS
    # ------

    # split in horizontal orientation (veticial dividers)
    bindsym h split h

    # split in vertical orientation (horizontal dividers)
    bindsym v split v

    # enter fullscreen mode for the focused container
    bindsym f fullscreen toggle

    # toggle tiling / floating
    bindsym Shift+space floating toggle


    # LAYOUT STYLES
    # -------------
    # change container layout (stacked, tabbed, toggle split)
    # Not used stacked mode
    # split = default tiling mode
    bindsym s layout stacking
    bindsym w layout tabbed
    bindsym e layout toggle split


    # PARENT / CHILD FOCUS
    # --------------------

    # change focus between tiling / floating windows
    bindsym space focus mode_toggle
    # focus the parent container
    bindsym a focus parent
    # focus the child container
    bindsym c focus child

    # back to normal: Enter or Escape or $mod+r
    bindsym Return mode "default"
    bindsym Escape mode "default"
    # bindsym $mod+r mode "default"
}
bindsym $mod+space mode "window"


# _____________________________________________________________________________
# WORKSPACES
# ----------
# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
# Want to be able to reach with ONLY left hand, so if mouse on right copy and pasting
# 1 = like I for init
set $ws1 "1_Init"
# @ = like G
set $ws2 "2_Gimp"
assign [class="Gimp"] $ws2
# 3 = sideways W
set $ws3 "3_Writer"
assign [class="libreoffice-writer"] $ws2
# $ = spreadsheets often used for $$$
set $ws4 "4_Calc"
assign [class="libreoffice-calc"] $ws2
# 5 = High Five awesome KiCAD
set $ws7 "5_KiCAD"
# 6 = FreeCAD has come with pain and suffering
set $ws6 "6_FreeCAD"
assign [class="FreeCAD"] $ws6
# 7 like I for Init
set $ws7 "7_Inkscape"
# 8 to 10 are flexible pads
set $ws8 "8"
set $ws9 "9"
set $ws10 "10_Misc"
# Assign cryptopmator to the slow ws (0)
# Accessible via the desktop dmenu (not dmenu)
assign [title="Cryptomator"] $ws10

# --- Q,W,E,R,T, and S are scratchpads

# --- F,D,A are terminals (S is scratchpad (S)erver terminal)

# Terminal F, first/primary primary dev
set $wsF "11-F"
bindsym $mod+f workspace number $wsF
bindsym $mod+Control+f move container to workspace number $wsF

# # Terminal D, secondary
set $wsD "12-D"
bindsym $mod+d workspace number $wsD
bindsym $mod+Control+d move container to workspace number $wsD

# Terminal A, Another
set $wsA "13-A"
bindsym $mod+a workspace number $wsG
bindsym $mod+Control+a move container to workspace number $wsA

# --- V,C,X,Z,B -> are Browsers
set $wsV "21-V_home"
bindsym $mod+v workspace number $wsV
bindsym $mod+Control+v move container to workspace number $wsV

set $wsC "22-C_work"
bindsym $mod+c workspace number $wsC
bindsym $mod+Control+c move container to workspace number $wsC

set $wsX "23-X_mom"
bindsym $mod+x workspace number $wsX
bindsym $mod+Control+x move container to workspace number $wsX

set $gwsZ "24-Z_mighty"
bindsym $mod+z workspace number $wsZ
bindsym $mod+Control+z move container to workspace number $wsZ

# Browser, dev/cookies testing etc
set $wsB "25-B_guest"
bindsym $mod+b workspace number $wsB
bindsym $mod+Control+b move container to workspace number $wsB


# switch to workspace
# Make F the first workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Control+1 move container to workspace number $ws1
bindsym $mod+Control+2 move container to workspace number $ws2
bindsym $mod+Control+3 move container to workspace number $ws3
bindsym $mod+Control+4 move container to workspace number $ws4
bindsym $mod+Control+5 move container to workspace number $ws5
bindsym $mod+Control+6 move container to workspace number $ws6
bindsym $mod+Control+7 move container to workspace number $ws7
bindsym $mod+Control+8 move container to workspace number $ws8
bindsym $mod+Control+9 move container to workspace number $ws9
bindsym $mod+Control+0 move container to workspace number $ws10



# DEFAULTS
#   class                 border  backgr. text    indicator child_border
# client.focused          #4c7899 #285577 #ffffff #2e9ef4   #285577
# client.focused_inactive #333333 #5f676a #ffffff #484e50   #5f676a
# client.unfocused        #333333 #222222 #888888 #292d2e   #222222
# client.urgent           #2f343a #900000 #ffffff #900000   #900000
# client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c

set $text-color          #ffffff
set $bg-color            #006000
set $inactive-bg-color   #707070
set $inactive-text-color #c0c0c0
set $urgent-bg-color     #c00000
set $indicator-color     #00ff00
set $status-line-color   #008000

# class                 border              backgr.             text                 indicator          child_border
client.focused          $bg-color           $bg-color           $text-color          $indicator-color   $bg-color
client.focused_inactive $inactive-bg-color  $inactive-bg-color  $text-color          $indicator-color   #222222
client.unfocused        $inactive-bg-color  $inactive-bg-color  $inactive-text-color $indicator-color   #404000
client.urgent           $urgent-bg-color    $urgent-bg-color    $text-color          $indicator-color   #900000
# placeholder = Background and text color are used to draw placeholder window contents (when restoring layouts). Border and indicator are ignored.
client.placeholder      #000000             #0c0c0c             #ffffff              #000000            #0c0c0c
client.background       #ffffff

# bar
bar {
    status_command i3status
    font pango: mono 12
    position top
    colors {
        background #303030
        separator #000000
        focused_statusline #e0e0e0
        #                  border             background         text
        focused_workspace  $bg-color          $bg-color          $text-color
        inactive_workspace #808080            #a0a0a0            #000000
        urgent_workspace   $urgent-bg-color   $urgent-bg-color   $text-color
    }
}

# Hide the outter left / right border
# Hides the borders if one app
hide_edge_borders smart

# _____________________________________________________________________________
# WALLPAPER
# -------------
# Wallpaper
# sudo apt install -y feh
# Refer to 'man feh' for other options
# exec_always feh --bg-center /home/michael/Pictures/wallpaper.jpg

# _____________________________________________________________________________
# CONFIGURATION FILE

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# _____________________________________________________________________________
# ACCESS & POWER CONTROL
# -------------
# bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
set $mode_system System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Shift+s) shutdown
mode "$mode_system" {
    bindsym l exec i3lock --show-failed-attempts --ignore-empty-password --color=004000, mode "default"
    bindsym e exec --no-startup-id i3-msg exit, mode "default"
    # Lock then suspend, so when wake up from syspend its locked
    # bindsym s exec --no-startup-id systemctl suspend, mode "default"
    bindsym s exec --no-startup-id i3lock --show-failed-attempts --ignore-empty-password --color=004000 && systemctl suspend, mode "default"
    bindsym h exec --no-startup-id systemctl hibernate, mode "default"
    bindsym r exec --no-startup-id systemctl reboot, mode "default"
    bindsym Shift+s exec --no-startup-id systemctl poweroff, mode "default"
    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Delete mode "$mode_system"


# _____________________________________________________________________________
# SCREENSHOT
# ----------
# gnome-screenshot very buggy, using maim
# Refer to: https://gist.github.com/dianjuar/ee774561a8bc02b077989bc17424a19f

# Screenshot area, copy to clipboard, save to $screenshot-file, and open with Pinta
set $screenshot-file "/home/$USER/Pictures/last_screenshot.png"
# Pinta require the file written to disk first, so we write to disk, then copy it, then open with Pinta
bindsym Print exec --no-startup-id maim --select $screenshot-file && cat $screenshot-file | xclip -selection clipboard -t image/png && pinta $screenshot-file

# Screen shot whole screen and save to Pictures/ with dated name
bindsym Shift+Print exec --no-startup-id maim "/home/$USER/Pictures/screenshot_$(date +'%Y-%m-%d_%H:%M:%S').png"

# Disable screen standby/suspend, set turn monitor off after 1hr
exec xset dpms 0 0 6000

# _____________________________________________________________________________
# SCREENS
# -------
# Refer to https://youtu.be/8-S0cWnLBKg?t=1027
# 1. sudo apt install -y arandr
# 2. > aranr
# 3. Use mouse to edit display as desired
# 4. Use `saveas` from arandr to a temp file, copy the command and paste it here:

# Screen definitions
set $screens-projector "xrandr --output eDP-1 --off --output VGA-1 --off --output HDMI-1 --off --output DP-1 --off --output HDMI-2 --mode 1920x1200 --pos 0x0 --rotate normal --output DP-2 --off --output HDMI-3 --off"
set $screens-projector-laptop "xrandr --output eDP-1 --mode 1920x1080 --pos 1920x0 --rotate normal --output VGA-1 --off --output HDMI-1 --off --output DP-1 --off --output HDMI-2 --primary --mode 1920x1200 --pos 0x0 --rotate normal --output DP-2 --off --output HDMI-3 --off"
set $screens-laptop "xrandr --output eDP-1 --primary --mode 1920x1080 --pos 0x0 --rotate normal --output VGA-1 --off --output HDMI-1 --off --output DP-1 --off --output HDMI-2 --off --output DP-2 --off --output HDMI-3 --off"

# Screen setup hotkeys
bindsym $mod+F1 exec --no-startup-id $screens-laptop
bindsym $mod+F2 exec --no-startup-id $screens-projector
bindsym $mod+F3 exec --no-startup-id $screens-projector-laptop

# Default screen
exec_always --no-startup-id $screens-projector

# _____________________________________________________________________________
# MEDIA KEYS
# ----------
# Refer to https://faq.i3wm.org/question/3747/enabling-multimedia-keys/?answer=3759#post-id-3759

# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness

# Touchpad controls
bindsym XF86TouchpadToggle exec /some/path/toggletouchpad.sh # toggle touchpad

# Media player controls
# sudo apt install -y playerctl
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# _____________________________________________________________________________
# VOLUME CONTROL
# --------------
bindsym $mod+Right exec --no-startup-id $pulse-audio-up
bindsym $mod+Left exec --no-startup-id $pulse-audio-down
bindsym $mod+Down exec --no-startup-id $pulse-audio-mute-on
bindsym $mod+Up exec --no-startup-id $pulse-audio-mute-off

# _____________________________________________________________________________
# NUM LOCK
# --------
exec_always --no-startup-id numlockx on

# _____________________________________________________________________________
# MOVE WS TO MONITOR
# -----------------
# Move focused workspace between monitors
bindsym $mod+greater move workspace to output right
bindsym $mod+less move workspace to output left

# _____________________________________________________________________________
# APP ON WS CREATION
# ------------------

# OCCASIONAL APPS
# At startup, if run app-on-ws-init when opened, seems to hang on WS1
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws1 --command ls
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws2 --command gimp
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws3 --command 'libreoffice --norestore --writer'
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws4 --command 'libreoffice --norestore --calc'
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws5 --command kicad

# FreeCAD takes long time to start up, if change ws, it will land in wrong WS
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws6 --command ~/appimages/FreeCAD-0.20.0-Linux-x86_64_b15d808987f3b6dedc7dff3907826696.AppImage

# FLEXIBLE
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws7 --command inkscape
# exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws8 --command "8"
# exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws9 --command "9"
# exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $ws10 --command "10"
# UTILS
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsQ --command speedcrunch
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsW --command pinta
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsE --command nautilus
# exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsR --command ~/appimages/cryptomator-1.6.5-x86_64.AppImage
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsT --command gedit
# TERMINALS / SCRATCH PAD
# Specify working dit like this (no ~ expansion)
# exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsF --command 'gnome-terminal --working-directory=/home/michael/linkcube'
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsA --command i3-sensible-terminal
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsS --command i3-sensible-terminal
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsD --command i3-sensible-terminal
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsF --command i3-sensible-terminal
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsG --command i3-sensible-terminal
# BROWSERS
# Mighty
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsZ --command 'google-chrome --password-store=gnome --profile-directory="Profile 5" https://music.youtube.com/playlist?list=LM'
# Mom
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsX --command "google-chrome --password-store=gnome --profile-directory='Profile 4' 'https://mail.google.com/mail/u/0/#inbox' 'https://onlinebanking.standardbank.co.za/#/login'"
# Work
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsC --command 'google-chrome --password-store=gnome --profile-directory="Profile 1" https://mail.google.com/mail/u/0/#inbox'
# Default (home) Browser
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsV --command 'google-chrome --password-store=gnome --profile-directory="Default"'
# Guest
exec_always --no-startup-id ~/.config/i3/scripts/app-on-ws-init.py --workspace $wsB --command 'google-chrome --guest'

# `xev` and press codes
# or `xmodmap -pk`
#   9        0xff1b (Escape)     0x0000 (NoSymbol)    0xff1b (Escape)
#   66       0xffe5 (Caps_Lock)  0x0000 (NoSymbol)    0xffe5 (Caps_Lock)
#   133      0xffeb (Super_L)    0x0000 (NoSymbol)    0xffeb (Super_L)
#   134      0xffec (Super_R)    0x0000 (NoSymbol)    0xffec (Super_R)
# Map Caps Lock -> Super_L
# man xmodmap

# WARNING !!! Have to restart i3 twice if changing below
# exec_always --no-startup-id setxkbmap -layout us -option " " -option "caps:swapescape"
# exec_always --no-startup-id xmodmap -e "add Mod4 = Escape"
# exec_always --no-startup-id xmodmap -e "add Mod4 = Space"
# exec_always --no-startup-id setxkbmap -layout us
# 66 = Caps_Lock
# exec_always --no-startup-id xmodmap -e 'clear lock'
# exec_always --no-startup-id xmodmap -e 'clear Mod4'
# exec_always --no-startup-id xmodmap -e 'clear Super'
# exec_always --no-startup-id xmodmap -e 'keycode 66 = NoSymbol NoSymbol NoSymbol NoSymbol NoSymbol NoSymbol'
# # exec_always --no-startup-id xmodmap -e 'keycode 66 = NoSymbol NoSymbol NoSymbol'
# exec_always --no-startup-id xmodmap -e "keycode 66 = Super_L Super_L Super_L Super_L Super_L Super_L"

exec_always --no-startup-id setxkbmap -option " " -option caps:hyper
# 9 = Escape
exec_always --no-startup-id xmodmap -e "keycode 9 = Caps_Lock Caps_Lock Caps_Lock"
exec_always --no-startup-id xmodmap -e "add Caps_Lock = lock"
# # 133 = Left Super -> Map to escape, but it still has Mod4 super power
exec_always --no-startup-id xmodmap -e "keycode 133 = Escape Escape Escape Escape Escape Escape"
exec_always --no-startup-id xmodmap -e "remove keycode 133 = super"

# Disable num lock
# exec_always --no-startup-id xmodmap -e "keycode 77 = Escape"
# Disable scroll lock
# exec_always --no-startup-id xmodmap -e "keycode 78 = Escape"

# Set the initial workspace
exec --no-startup-id i3-msg workspace $ws1

# _____________________________________________________________________________
# SCRATCH PAD
# -----------
# Move calc and gedit to scratch pad
# bindsym $mod+Shift+minus move scratchpad
# bindsym $mod+minus [class="Gedit"] scratchpad show
# exec_always gedit
# for_window [class="Gedit"] , move scratchpad
# bindsym $mod+t [class="Gedit"] scratchpad show

# does not work
# bindsym $mod+F3 nvim ~/.config/
# bindsym $mod+b [role="scratchpad-pulse"] scratchpad show; move position center
# bindsym $mod+n [role="scratchpad-ttrm"] scratchpad show; move position center
# bindsym $mod+v [role="scratchpad-mus"] scratchpad show; move position center
# exec_always --no-startup-id pgrep -f '^alacritty --class pulse,pulse' || alacritty --class pulse,pulse -e pulsemixer
# exec_always --no-startup-id pgrep -f '^alacritty --class ttrm,ttrm' || alacritty --class ttrm,ttrm
# exec_always --no-startup-id pgrep -f '^alacritty --class mus,mus' || alacritty --class mus,mus -e ncmpcpp
# exec_always --no-startup-id pgrep -f '^alacritty --class fm,fm' || alacritty --class fm,fm -e ranger

# bindsym $mod+e [window_role="scratchpad-file-manager"] scratchpad show; move position center
# exec_always --no-startup-id gnome-terminal --role=scratchpad-file-manager -- ranger
# for_window [window_role="scratchpad-file-manager"] , move scratchpad

for_window [window_role="scratchpad-file-manager"] , move scratchpad
for_window [window_role="scratchpad-terminal"] , move scratchpad
for_window [window_role="scratchpad-server"] , move scratchpad
for_window [class="SpeedCrunch"] , move scratchpad
for_window [class="Gedit"] , move scratchpad
for_window [class="Pinta"] , move scratchpad
bindsym $mod+e exec i3-msg [window_role="scratchpad-file-manager"] scratchpad show || (gnome-terminal --role=scratchpad-file-manager -- ranger && i3-msg [window_role="scratchpad-file-manager"] scratchpad show)
bindsym $mod+t exec i3-msg [window_role="scratchpad-terminal"] scratchpad show || (gnome-terminal --role=scratchpad-terminal && i3-msg [window_role="scratchpad-terminal"] scratchpad show)
bindsym $mod+s exec i3-msg [window_role="scratchpad-server"] scratchpad show || (gnome-terminal --role=scratchpad-terminal && i3-msg [window_role="scratchpad-terminal"] scratchpad show)
bindsym $mod+q exec i3-msg [class="SpeedCrunch"] scratchpad show || (speedcrunch && i3-msg [class="SpeedCrunch"] scratchpad show)
bindsym $mod+r exec i3-msg [class="Gedit"] scratchpad show || (gedit && i3-msg [window_role="Gedit"] scratchpad show)
bindsym $mod+w exec i3-msg [class="Pinta"] scratchpad show || (pinta && i3-msg [window_role="Pinta"] scratchpad show)

# _____________________________________________________________________________
# MARKS
# -----
# Vim like marks: https://i3wm.org/docs/userguide.html#vim_like_marks

# read 1 character and mark the current window with this character
# Font size 20
bindsym $mod+m exec i3-input -F 'mark %s' -l 1 -P 'Mark: ' -f '*-*-*-*-*-normal-*-20-*-*-*-*-*-*-*'
# read 1 character and go to the window with the character
bindsym $mod+apostrophe exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: ' -f '*-*-*-*-*-normal-*-20-*-*-*-*-*-*-*'

# _____________________________________________________________________________
# Was going to bing input to switch to workspace
# -----
# Open workspace number
# rename workspaces
# bindsym $mod+space exec i3-input -F 'mark %s' -l 1 -P 'Mark: ' -f '*-*-*-*-*-normal-*-20-*-*-*-*-*-*-*'
# i3-msg -t get_workspaces
# bindsym $mod+space exec i3-input -F "workspace %s" -l 1 -P "GOTO Workspace: " -f '*-*-*-*-*-normal-*-20-*-*-*-*-*-*-*'
